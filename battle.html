<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pokemon battle</title>
  </head>
  <body>
    <img
      src="/assets/pokemonBall.jpg"
      id="squirtle"
      alt="pokemonBall"
      width="120px"
    />
    <img
      src="/assets/pokemonBall.jpg"
      id="vulpix"
      alt="pokemonBall"
      width="120px"
    />
    <div class="pokemon-container"></div>
    <script>
      const pokemonContainer = document.querySelector(".pokemon-container");
      const squirtle = document.querySelector("#squirtle");
      const vulpix = document.querySelector("#vulpix");
      let pokemonGood = [];

      async function fetchBattlePokemon(name) {
        const pokemonRequest = await fetch(
          `https://pokeapi.co/api/v2/pokemon/${name}/`
        );
        let response = await pokemonRequest.json();
        return response;
      }

      async function fetchAndShowPokemon(name) {
        try {
          pokemonsId = [];

          idOfPokemon = await fetchBattlePokemon(name);
          pokemonsId.push(idOfPokemon);
          console.log(pokemonsId);
          pokemonGood = pokemonsId.map((pokemon) => ({
            name: pokemon.name,
            image: pokemon.sprites.other["official-artwork"].front_default,
            type: pokemon.types[0].type.name,
            hp: pokemon.stats[0].base_stat,
            attack: pokemon.stats[1].base_stat,
            defense: pokemon.stats[2].base_stat,
            specialAttack:pokemon.stats[3].base_stat,
            specialDefense: pokemon.stats[4].base_stat,
            speed: pokemon.stats[5].base_stat,
          }));
          console.log("hvor mange", pokemonGood);
          showPokemon(pokemonGood);
        } catch (error) {
          console.error("her klarte vi ikke Ã¥ hente pokemon", error);
        }
      }
      function showPokemon(pokemons) {
        pokemonContainer.innerHTML = "";
        pokemons.forEach((pokemon, index) => {
          const pokemonCard = document.createElement("div");
          pokemonContainer.style.display = "flex";
          pokemonContainer.style.flexWrap = "wrap";
          pokemonContainer.style.gap = "10px";
          pokemonCard.style.width = "210px";
          pokemonCard.style.color = "white";
          pokemonCard.style.height = "370px";
          pokemonCard.style.padding = "10px";
          pokemonCard.style.backgroundColor =
            pokemon.type == "water"
              ? "#1451E3"
              : pokemon.type == "grass"
              ? "#12793C"
              : pokemon.type == "electric"
              ? "#E2E22A"
              : pokemon.type == "fire"
              ? "#AA1E21"
              :
          pokemonCard.innerHTML = `<img src="${pokemon.image}" style ="width: 200px" /> <h3>Navn: ${pokemon.name} <br> Type: ${pokemon.type}</h3>`;
          pokemonContainer.appendChild(pokemonCard);
        });
      }

      squirtle.addEventListener("click", () => {
        fetchAndShowPokemon("squirtle");
      });
      vulpix.addEventListener("click", () => {
        fetchAndShowPokemon("vulpix");
      });
    </script>
  </body>
</html>
